<!DOCTYPE html>
<html> 
  <head>
    <title>JOGOS</title> 
  </head>
<div class="header">
  <h1>Jogos em java script</h1>
  <p>projeto HAC da Joana</p>
</div>	
	
  <body>
	<!--This draws the canvas on the webpage -->
    <canvas id="mycanvas"></canvas> 
  </body>


 
  <!-- Include the processing.js library -->
  <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
  <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
  <script>
  var programCode = function(processingInstance) {
    with (processingInstance) {
      size(400, 400); 
     // frameRate(30);
        
      // Paste code from Khan Academy here:
	    // COLOCAR O JOGO AQUI

	    /**
battle with an evil golden winston robot in this unfinished game. sorry, but I ran out of time. =P but its playable, so enjoy!


*/

/*
easy mode:
    roll across ground
    leap towards player
    shoot eye lasers
    breathe fire
    deploy winston drones
    sit still on platform.
*//*
hard mode:
    fireball roll across ground
    eye beams
    barf lava
    deploy winston drones
    fire waves
    sit still on platform
*/

//winston drone attack pattern:
/*
    fly to close by player
    shoot lasers
    swoop down and hit player
    
*/
//frameRate(max);
//{
var c = [
    color(148, 125, 44), 
    color(171, 141, 51),
    color(125, 102, 31),
    color(110, 89, 31),
    color(204, 170, 75),
    color(140, 115, 48),
    color(179, 151, 59), 
    color(161, 134, 45), 
];
noStroke();
var winstonG = function(x,y,r,dir){
    if(dir === "right"){
        pushMatrix();
        translate(x,y);
        rotate(r);
        fill(c[5]);
        ellipse(0,0,200,200);
        fill(c[0]);
        ellipse(4,-3,190,190);
        fill(c[5]);
        ellipse(21,31,100,100);
        fill(c[1]);
        ellipse(25,27,100,100);
        fill(c[0]);
        ellipse(25,27,80,80);
        fill(c[2]);
        ellipse(21,29,70,70);
        fill(0, 0, 0,20);
        ellipse(21,29,15,15);
        ellipse(39,29,15,15);
        ellipse(30,13,15,15);
        ellipse(11,13,15,15);
        ellipse(3,29,15,15);
        ellipse(30,45,15,15);
        ellipse(11,45,15,15);
        fill(c[4]);
        ellipse(-20,27,5,5);
        ellipse(70,27,5,5);
        ellipse(25,-18,5,5);
        ellipse(25,72,5,5);
        ellipse(-6,-5,5,5);
        ellipse(57,-5,5,5);
        ellipse(-6,59,5,5);
        ellipse(57,59,5,5);
        strokeWeight(10);
        noFill();
        stroke(255, 255, 255,20);
        arc(25,27,90,90,-90,2);
        stroke(0, 0, 0,20);
        arc(25,27,90,90,-271,-179);
        stroke(0, 0, 0,40);
        strokeWeight(4);
        line(-95,27,-27,27);
        stroke(c[6]);
        strokeWeight(5);
        point(-37,20);
        point(-61,20);
        point(-83,20);
        strokeWeight(7);
        stroke(c[5]);
        line(-89,32.5,-30,32.5);
        stroke(c[7]);
        arc(0,0,193,193,-81,19);
        stroke(c[1]);
        strokeWeight(10);
        bezier(-99,-80,-53,-151,-7,-35,21,-43);
        bezier(128,-80,64,-151,61,-35,21,-43);
        noStroke();
        fill(c[5]);
        ellipse(-41,-39,50,50);
        ellipse(77,-39,50,50);
        fill(c[1]);
        ellipse(-38,-44,50,50);
        ellipse(82,-44,50,50);
        fill(c[2]);
        ellipse(-38,-44,30,30);
        ellipse(82,-44,30,30);
        fill(c[3]);
        ellipse(-38,-44,15,15);
        ellipse(82,-44,15,15);
        fill(c[4]);
        ellipse(-58,-44,5,5);
        ellipse(-18,-44,5,5);
        ellipse(-38,-64,5,5);
        ellipse(-38,-24,5,5);
        ellipse(62,-44,5,5);
        ellipse(102,-44,5,5);
        ellipse(82,-64,5,5);
        ellipse(82,-24,5,5);
        popMatrix();
    }
    if(dir === "left"){
        pushMatrix();
        translate(x,y);
        rotate(r);
        scale(-1,1);
        fill(c[5]);
        ellipse(0,0,200,200);
        fill(c[0]);
        ellipse(4,-3,190,190);
        fill(c[5]);
        ellipse(21,31,100,100);
        fill(c[1]);
        ellipse(25,27,100,100);
        fill(c[0]);
        ellipse(25,27,80,80);
        fill(c[2]);
        ellipse(21,29,70,70);
        fill(0, 0, 0,20);
        ellipse(21,29,15,15);
        ellipse(39,29,15,15);
        ellipse(30,13,15,15);
        ellipse(11,13,15,15);
        ellipse(3,29,15,15);
        ellipse(30,45,15,15);
        ellipse(11,45,15,15);
        fill(c[4]);
        ellipse(-20,27,5,5);
        ellipse(70,27,5,5);
        ellipse(25,-18,5,5);
        ellipse(25,72,5,5);
        ellipse(-6,-5,5,5);
        ellipse(57,-5,5,5);
        ellipse(-6,59,5,5);
        ellipse(57,59,5,5);
        strokeWeight(10);
        noFill();
        stroke(255, 255, 255,20);
        arc(25,27,90,90,-90,2);
        stroke(0, 0, 0,20);
        arc(25,27,90,90,-271,-179);
        stroke(0, 0, 0,40);
        strokeWeight(4);
        line(-95,27,-27,27);
        stroke(c[6]);
        strokeWeight(5);
        point(-37,20);
        point(-61,20);
        point(-83,20);
        strokeWeight(7);
        stroke(c[5]);
        line(-89,32.5,-30,32.5);
        stroke(c[7]);
        arc(0,0,193,193,-81,19);
        stroke(c[1]);
        strokeWeight(10);
        bezier(-99,-80,-53,-151,-7,-35,21,-43);
        bezier(128,-80,64,-151,61,-35,21,-43);
        noStroke();
        fill(c[5]);
        ellipse(-41,-39,50,50);
        ellipse(77,-39,50,50);
        fill(c[1]);
        ellipse(-38,-44,50,50);
        ellipse(82,-44,50,50);
        fill(c[2]);
        ellipse(-38,-44,30,30);
        ellipse(82,-44,30,30);
        fill(c[3]);
        ellipse(-38,-44,15,15);
        ellipse(82,-44,15,15);
        fill(c[4]);
        ellipse(-58,-44,5,5);
        ellipse(-18,-44,5,5);
        ellipse(-38,-64,5,5);
        ellipse(-38,-24,5,5);
        ellipse(62,-44,5,5);
        ellipse(102,-44,5,5);
        ellipse(82,-64,5,5);
        ellipse(82,-24,5,5);
        popMatrix();
    }
};
var winstonDroneG = function(x,y,r){
    pushMatrix();
    translate(x,y);
    rotate(r);
    fill(c[5]);
    ellipse(0,0,50,50);
    fill(c[0]);
    ellipse(4,-3,40,40);
    fill(c[5]);
    ellipse(-1,1,30,30);
    fill(c[1]);
    ellipse(1,-1,30,30);
    fill(c[2]);
    ellipse(1,-1,20,20);
    fill(c[3]);
    ellipse(1,-1,10,10);
    fill(c[4]);
    ellipse(20,0,5,5);
    fill(c[1]);
    ellipse(0,19,5,5);
    ellipse(-19,0,5,5);
    strokeWeight(5);
    stroke(c[1]);
    line(0,-20,0,-40);
    noStroke();
    fill(c[0]);
    ellipse(0,-41,10,10);
    (fill)(c[4],random(100,200));
    ellipse(0,-41,75,20);
    (fill)(255,255,255,random(20,70));
    arc(0,-41,75,20,-20,20);
    arc(0,-41,75,20,160,200);
    (fill)(255,255,255,random(20,70));
    arc(0,-41,75,20,-40,40);
    arc(0,-41,75,20,140,220);
    popMatrix();
};
var flames = [];
var Flame = function(x,y,xv,yv){
    this.x = x;
    this.y = y;
    this.xv = xv;
    this.yv = yv;
    this.s = random(20,40);
    this.t = 0;
    this.colors = [
        color(255, 191, 0),
        color(255, 38, 0),
    ];
};
Flame.prototype.draw = function(){
    noStroke();
    pushMatrix();
    translate(this.x,this.y);
    rotate(45);
    rectMode(CENTER);
    fill(lerpColor(this.colors[0],this.colors[1],this.t));
    rect(0,0,this.s,this.s);
    rectMode(CORNER);
    popMatrix();
    this.x+=this.xv;
    this.y+=this.yv;
    this.s--;
    this.t+=0.03;
    if(this.s < 0){
        this.ded = true;
    }
};
//} graphics
var arenaWidth = 1200;
//canvas shake function
var s = {
    x:0,
    y:0,
    amount:0,
    shake: function(strength){
        s.amount = strength;
    }
};
//my boi
var p = {
    x:0,
    y:0,
    v:0,
    g:0,
    h: 590,
    input:[],
    damtimer: 0,
    red: 0,
    damage: function(dam,knockback,jump){
        if(p.damtimer <= 0){
            p.h -=dam;
            p.v = knockback;
            p.g = jump;
            p.damtimer = 20;
            p.red = dam*10;
        }
    },
    swing: 0,
    swingT: 0,
};
//FIRREEEEE!!!
var Fireball = function(x,y,r,grav){
    this.x = x;
    this.y = y;
    this.r = r;
    this.grav = grav || "none";
    this.t = 0;
};
Fireball.prototype.draw = function(){
    this.t++;
    this.x+=cos(this.r)*15;
    this.y+=sin(this.r)*15;
    if(this.grav !== "none"){
        this.grav++;
        this.y+=this.grav;
        if(this.y > 550){
            this.grav = -this.grav/5;
        }
    }
    flames.push(new Flame(this.x,this.y,random(-2,2),random(-2,2)));
    if(this.x < 0 || this.x > arenaWidth){
        this.ded = true;
    }
    if(this.y < -600){
        this.ded = true;
    }
    if(this.t > 300){
        this.ded = true;
    }
    if(dist(this.x,this.y,p.x,p.y) < 50){
        p.damage(10,-(this.x-p.x)/5,-10);
    }
};
//Laser beans
var Laser = function(x,y,r,dam){
    this.x = x;
    this.y = y;
    this.r = r;
    this.dam = dam;
};
Laser.prototype.draw = function(){
    pushMatrix();
    translate(this.x,this.y);
    rotate(this.r);
    fill(255, 81, 0);
    rect(0,-5,50,10,5);
    popMatrix();
    this.x+=cos(this.r)*20;
    this.y+=sin(this.r)*20;
    if(this.x < 0 || this.x > arenaWidth){
        this.ded = true;
    }
    if(this.y < -600 || this.y > 550){
        this.ded = true;
    }
    fill(255, 0, 187);
    ellipse(this.x,this.y,10,10);
    if(dist(this.x,this.y,p.x,p.y) < 30){
        p.damage(this.dam,p.v,p.g);
    }
};
//Winstons Little drone men
var Drone = function(x,y){
    this.x = x;
    this.y = y;
    this.v = 0;
    this.g = 0;
    this.t = 0;
    this.hit = false;
    this.deathT = 0;
    this.lasers = [];
};
Drone.prototype.draw = function(lasery){
    this.t++;
    this.deathT++;
    fill(0, 0, 0,40);
    ellipse(this.x,550,60,-10);
    winstonDroneG(this.x,this.y);
    this.x+=this.v;
    this.y+=this.g;
    this.v = constrain(this.v,-10,10);
    if(this.t < 2){
        this.target = {
            x: p.x,
            y: p.y,
        };
    }
    if(this.t > 2 && this.t < 300){
        if(this.x < this.target.x){
            this.v++;
        }
        if(this.x > this.target.x){
            this.v--;
        }
        this.g = -sin(this.t*10)*10;
        if(this.t > 20 && this.t%40 === 0){
            this.lasers.push(new Laser(this.x,this.y,270-atan2(this.x-p.x,this.y-p.y),5));
        }
    }
    if(this.t > 300 && this.t < 350){
        //slow down fella
        if(this.v > 0.5){
            this.v -= 0.5;
        }
        else if(this.v < -0.5){
            this.v += 0.5;
        }
        else{
            this.v = 0;
        }
        if(this.g > 0.5){
            this.g -= 0.5;
        }
        else if(this.g < -0.5){
            this.g += 0.5;
        }
        else{
            this.g = 0;
        }
    }
    if(this.t > 350 && this.t < 5000){
        if(dist(this.x,this.y,p.x,p.y) < 100){
            p.damage(5,p.v,-10);
        }
        this.target = {
            x: p.x,
            y: p.y,
        };
        if(this.y > 500){
            this.g = 0;
        }
        if(this.y < 500 && !this.hit){
            this.g+=2;
            if(this.x < this.target.x){
                this.v++;
            }
            if(this.x > this.target.x){
                this.v--;
            }
        }
        if(this.x > this.target.x-10 && this.x < this.target.x+10){
            this.hit = true;
        }
        if(this.hit){
            this.g--;
            if(this.y < 200){
                this.g = 0;
                this.hit = false;
                this.t = 0;
            }
        }
    }
    if(this.deathT > 1200){
        this.ded = true;
        for(var i = 0; i < 360; i+=30){
            lasery.push(new Laser(this.x,this.y,i,5));
        }
    }
    for(var i = this.lasers.length-1; i >= 0; i--){
        var l = this.lasers[i];
        l.draw();
        if(l.ded){
            this.lasers.splice(i,1);
        }
    }
};
//Winston's OOP object
var Winston = function(){
    this.health = 590;
    //does nothing currently
    this.facing = "left";
    //x and y positions
    this.x = 600;
    this.y = 0;
    //a timer that has no purpose yet
    this.t = 0;
    //health, also not yet implemented
    this.hp = 1000;
    //the velocity and gravity
    this.v = 0;
    this.g = 0;
    //the rotation
    this.r = 0;
    //the fIrE!
    this.fireballs = [];
    //the drones
    this.drones = [];
    //winston's target. currently nothing, used in targeting attacks.
    this.target = {};
    //winston's action functions. these are what tell him to move
    this.sit = function(){
        if(this.x > (arenaWidth/2)+10 || this.x < (arenaWidth/2)-10){
            if(this.x < arenaWidth/2){
                this.v++;
                this.facing = "right";
            }
            if(this.x > arenaWidth/2){
                this.v--;
                this.facing = "left";
            }
        }
        else{
            if(this.v > 0.5){
                this.v-=1;
            }
            else if(this.v < -0.5){
                this.v+=1;
            }
            else{
                this.v = 0;
            }
        }
        if(this.t > 500){
            return "continue";
        }
    };
    this.leap = function(){
        if(this.t < 2){
            this.target = {
                x:p.x,
                y:0,
            };
            if(this.x < this.target.x - 10){
                this.v+=10;
                this.facing = "right";
            }
            else if(this.x > this.target.x + 10){
                this.v-=10;
                this.facing = "left";
            }
            if(this.target.y < this.y){
                this.g = -30;
                s.shake(5);
            }
        }
        if(dist(this.x,0,this.target.x,0) < 50){
            if(this.v > 0.5){
                this.v-=0.5;
            }
            else if(this.v < -0.5){
                this.v+=0.5;
            }
            else{
                this.v = 0;
            }
        }
        if(this.t > 100){
            return "continue";
        }
    };
    this.roll = function(){
        if(this.t < 2){
            this.target = {
                x:arenaWidth,
                y:0,
            };
            this.g = -20;
        }
        if(this.x < this.target.x - 50){
            this.v = 15;
            this.facing = "right";
            this.r+=5;
            s.shake(5);
        }
        else if(this.x > this.target.x + 50){
            this.v = -15;
            this.facing = "left";
            this.r-=5;
            s.shake(5);
        }
        if(this.x > arenaWidth - 25 && this.x < arenaWidth + 25){
            this.target = {
                x:0,
                y:0,
            };
            this.g = -20;
        }
        if(this.x > 25 && this.x < 75){
            this.target = {
                x:arenaWidth,
                y:0,
            };
            this.g = -20;
        }
        if(this.t > 200){
            this.r = 0;
            return "continue";
        }
    };
    this.wait = function(){
        this.v = 0;
        if(this.t > 100){
            return "continue";
        }
    };
    this.fireball = function(){
        if(this.t < 2){
            s.shake(2);
            this.v = 0;
            this.target = {
                x:p.x,
                y:0,
            };
            if(this.x < this.target.x){
                this.facing = "right";
                this.fireballs.push(new Fireball(this.x+20,this.y+30,0));
                this.v = -20;
            }
            if(this.x > this.target.x){
                this.facing = "left";
                this.fireballs.push(new Fireball(this.x+20,this.y+30,180));
                this.v = 20;
            }
        }
        else{
            if(this.v > 0.5){
                this.v -= 0.5;
            }
            else if(this.v < 0.5){
                this.v += 0.5;
            }
            else{
                this.v = 0;
            }
        }
        if(this.t > 75){
            return "continue";
        }
    };
    this.blitz = function(){
        if(this.t < 2){
            this.v = 0;
            s.shake(10);
            for(var i = 240; i < 301; i+=15){
                this.fireballs.push(new Fireball(this.x,this.y+30,i+random(-15,15),-15));
            }
        }
        else{
            if(this.v > 0.5){
                this.v -= 0.5;
            }
            else if(this.v < 0.5){
                this.v += 0.5;
            }
            else{
                this.v = 0;
            }
        }
        if(this.t > 75){
            return "continue";
        }
    };
    this.spawn = function(){
        if(this.t < 2){
            this.v = 0;
            s.shake(10);
        }
        else{
            if(this.t%40 === 0){
                this.t++;
                this.drones.push(new Drone(this.x+random(-50,50),this.y+random(-50,50)));
            }
        }
        if(this.t > 100){
            return "continue";
        }
    };
    this.laser = function(){
        if(this.t < 10){
            this.v = 0;
        }
        else{
            this.r+=10;
            this.g = 0;
            if(this.y > 200+sin(this.t*10)*10){
                this.y -= dist(this.y,0,200+sin(this.t*10)*10,0)/20;
            }
            if(this.y < 200+sin(this.t*10)*10){
                this.y += dist(this.y,0,200+sin(this.t*10)*10,0)/20;
            }
            if(this.t%2 === 0){
                this.fireballs.push(new Laser(this.x,this.y,sin(this.t*10)*90,15));
                this.fireballs.push(new Laser(this.x,this.y,180+sin(this.t*10)*90,15));
            }
            if(this.t > 200){
                this.r = 0;
                return "continue";
            }
        }
    };
    this.spew = function(){
        if(this.t < 10){
            this.v = 0;
        }
        else{
            this.g = 0;
            if(this.y > 200+sin(this.t*10)*10){
                this.y -= dist(this.y,0,200+sin(this.t*10)*10,0)/20;
            }
            if(this.y < 200+sin(this.t*10)*10){
                this.y += dist(this.y,0,200+sin(this.t*10)*10,0)/20;
            }
            if(this.t%25 === 0){
                s.shake(2);
                this.fireballs.push(new Fireball(this.x,this.y,45+sin(this.t*10)*30,-20));
                this.fireballs.push(new Fireball(this.x,this.y,180-45+sin(this.t*10)*30,-20));
        
            }
            if(this.t > 200){
                s.shake(10);
                for(var i = 0; i < 5; i++){
                    this.fireballs.push(new Fireball(this.x,this.y,random(0,180),-20));
                }
                return "continue";
            }
        }
    };
    this.loop = function(){
        this.health -= 590/(this.cycles.length-1);
        if(this.cycle < this.cycles.length){
            this.cycle++;
            this.difficulty = this.cycles[this.cycle];
            this.stage = 0;
        }
        else{
            noLoop();
        }
        //return "loop";
    };
    //what stage is winston on? if the stage is 0 he is doing whatever attackCycles[0][0] is. in this case sitting.
    this.stage = 0;
    //how hard is hee?
    this.difficulty = 0;
    //the array that holds the attack cycles. I want this to control what order winston does things in.
    this.cycle = 0;
    this.cycles = "0 0 0 1 1 1 2 2 2 3 3 3 3 4".split(" ");
    this.attackCycles = [
        //easy
        "wait wait leap wait leap wait leap wait leap wait leap wait fireball fireball fireball wait wait fireball fireball fireball wait wait roll wait roll wait roll sit loop".split(" "),
        //medium
        "leap leap leap leap leap fireball fireball fireball fireball fireball wait roll leap roll leap roll wait spawn roll roll sit loop".split(" "),
        //hard
        "wait laser wait laser wait spawn roll leap roll spawn leap roll blitz sit loop".split(" "),
        
        //evil
        "wait laser laser blitz laser laser wait spawn spawn blitz laser roll leap roll leap roll blitz sit spew loop".split(" "),
        
        //maniacal
        "spew blitz spew blitz spew wait roll roll roll roll leap leap roll leap roll laser spawn laser spawn laser blitz roll roll blitz roll roll roll spawn spawn blitz laser spew roll leap sit loop".split(" ")
    ];
    //my conversion function that takes in a string of the current attack's name and outputs the attack function.
    this.stageNameToStage = function(name){
        var translation;
        switch(name){
            case "roll":
                translation = this.roll;
            break;
            case "sit":
                translation = this.sit;
            break;
            case "leap":
                translation = this.leap;
            break;
            case "wait":
                translation = this.wait;
            break;
            case "fireball":
                translation = this.fireball;
            break;  
            case "blitz":
                translation = this.blitz;
            break;  
            case "spawn":
                translation = this.spawn;
            break;
            case "laser":
                translation = this.laser;
            break;
            case "spew":
                translation = this.spew;
            break;
            case "loop":
                translation = this.loop;
            break;
        }
        return translation;
    };
};
//the draw thing
Winston.prototype.draw = function(){
    this.x = constrain(this.x,0,arenaWidth);
    //shadow
    fill(0, 0, 0,40);
    ellipse(this.x,550,208+(460-this.y),35);
    //graphics
    winstonG(this.x,this.y,this.r,this.facing);
    //fireballs yes
    for(var i = this.fireballs.length-1; i >= 0; i--){
        var f = this.fireballs[i];
        f.draw();
        if(f.ded){
            this.fireballs.splice(i,1);
        }
    }
    //dronies
    for(var i = this.drones.length-1; i >= 0; i--){
        var d = this.drones[i];
        d.draw(this.fireballs);
        if(d.ded){
            this.drones.splice(i,1);
        }
    }
    //x increases by velocity, and y increases by gravity
    this.x += this.v;
    this.y += this.g;
    //gravity is always going up
    this.g+=2;
    //constraining the velocity
    this.v = constrain(this.v,-15,15);
    //the collision with the ground
    if(this.y > 460){
        this.y = 460;
        if(this.g > 5){
            s.shake(this.g/5);
            this.g = -this.g/3;
        }
        else{
            this.g = 0;
        }
    }
    this.stageNameToStage(this.attackCycles[this.difficulty][this.stage]).call(this);
    this.t++;
    if(this.stageNameToStage(this.attackCycles[this.difficulty][this.stage]).call(this) === "loop"){
        this.t = 0;
        this.stage = 0;
    }
    if(this.stageNameToStage(this.attackCycles[this.difficulty][this.stage]).call(this) === "continue"){
        this.t = 0;
        this.stage++;
    }
    if(dist(this.x,this.y,p.x,p.y) < 125){
        p.damage(10,-(this.x-p.x)/5,-10);
    }
};
//a new winston
var w = new Winston();
keyPressed = function(){p.input[keyCode] = true;};
keyReleased = function(){p.input[keyCode] = false;};
//draw function
draw = function(){
    p.red--;
    p.damtimer--;
    //the matrix push
    pushMatrix();
    //this lets the canvas shake
    translate(s.x,s.y);
    translate(-p.x+300,0);
    //scale(0.4);
    if(s.amount > 0){
        s.amount -= 0.1;
    }
    s.x = random(-s.amount,s.amount);
    s.y = random(-s.amount,s.amount);
    //background
    background(214, 214, 214);
    //floor
    fill(189, 189, 189);
    rect(0,500,arenaWidth,100);
    fill(184, 184, 184);
    rect(-300,0,300,600);
    rect(arenaWidth,0,300,600);
    //drawing winston
    w.draw();
    //playery boi
    fill(0, 27, 161);
    ellipse(p.x,p.y,50,50);
    p.x+=p.v;
    p.y+=p.g;
    p.g++;
    if(p.y > 530){
        p.y = 530;
        p.g = 0;
    }
    p.v = constrain(p.v,-10,10);
    p.x = constrain(p.x,0,arenaWidth-50);
    if(p.input[LEFT]){
        p.v--;
    }
    if(p.input[RIGHT]){
        p.v++;
    }
    if(p.input[UP] && p.y >= 529){
        p.g = -25;
    }
    if(p.v > 0.5){
        p.v-=0.5;
    }
    else if(p.v < -0.5){
        p.v+=0.5;
    }
    else{
        p.v = 0;
    }
    //the FIRE!!! AHAHAHAHA
    for(var i = flames.length-1; i >= 0; i--){
        var f = flames[i];
        f.draw();
        if(f.ded){
            flames.splice(i,1);
        }
    }
    //the matrix pop
    popMatrix();
    //healthy bar
    fill(37, 191, 10);
    rect(5,5,p.h,20);
    fill(214, 47, 47);
    rect(5,575,w.health,20);
    if(p.h < 590){
        p.h+=0.06;
        if(w.difficulty >= 2){
            p.h+=0.01;
        }
        if(w.difficulty >= 3){
            p.h+=0.02;
        }
        if(w.difficulty >= 4){
            p.h+=0.03;
        }
    }
    if(p.h <= 0){
        println("wow your dead");
    }
    if(w.h <= 0){
        println("wow you win");
    }
    //the text that displays fps(why not) and the current attack's name.
    fill(0, 0, 0);
    textAlign(CENTER,CENTER);
    textSize(20);
    text("fps: " + round(this.__frameRate)+" - Current Attack: "+w.attackCycles[w.difficulty][w.stage],300,50);
    fill(255, 0, 0,p.red);    rect(0,0,600,600);
};








	    
	    
	    
	    
	  /*  noStroke();
		background(0, 0, 0);
		var r = 255;
		var g = 90;
		var b = 0;
		for (var i=0;i<360;i+=30){
		   fill(r, g, b); 
		   r -= 21;
		   g += 13;
		   b += 21;
		pushMatrix();
		translate(200,200);
		rotate(i);
		rect(0, 0, 150, 15);
		popMatrix();
		}
		noStroke();*/

	    
    }};

  // Get the canvas that ProcessingJS will use
  var canvas = document.getElementById("mycanvas"); 
  // Pass the function to ProcessingJS constructor
  var processingInstance = new Processing(canvas, programCode); 
  </script>
</html>
